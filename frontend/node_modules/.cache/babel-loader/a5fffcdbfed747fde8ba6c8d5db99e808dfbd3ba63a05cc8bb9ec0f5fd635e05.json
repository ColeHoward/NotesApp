{"ast":null,"code":"import _objectSpread from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{Link}from'react-router-dom';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(id,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;console.log('data',data);setNote(data);case 10:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/\".concat(id,\"/update/\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function createNote(){return _ref3.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!=='new'&&!note.body){deleteNote();}else if(id!=='new'){updateNote();}else if(id==='new'&&note!==null){createNote();}navigate('/');};var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(id,\"/delete/\"),{method:\"DELETE\",'headers':{'Content-Type':'application/json'}});navigate('/');case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","ReactComponent","ArrowLeft","Link","useNavigate","NotePage","navigate","id","note","setNote","getNote","fetch","response","json","data","console","log","updateNote","method","headers","body","JSON","stringify","createNote","handleSubmit","deleteNote","e","target","value"],"sources":["/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useParams } from 'react-router-dom';\nimport {ReactComponent as ArrowLeft} from \"../assets/arrow-left.svg\";\nimport {Link} from 'react-router-dom';\nimport { useNavigate } from \"react-router-dom\";\n\n\nconst NotePage = () => {\n    let navigate = useNavigate();\n    const { id } = useParams();\n    let [note, setNote] = useState(null);\n    \n    useEffect( () => {\n        getNote()\n    }, [id])\n\n    let getNote = async () => {\n      if (id === 'new') return\n        let response = await fetch(`/api/notes/${id}/`)\n        let data = await response.json()\n        console.log('data', data)\n        setNote(data)\n    }\n\n    let updateNote = async () => {\n      fetch(`/api/notes/${id}/update/`, {\n        method: \"PUT\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(note)\n      })\n    }\n\n    let createNote = async () => {\n      fetch(`/api/notes/create/`, {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(note)\n      })\n    }\n\n    let handleSubmit = () => {\n      if (id !== 'new' && !note.body) {\n        deleteNote()\n      }else if (id !== 'new') {\n        updateNote()\n      }else if (id === 'new' && note !== null){\n        createNote()\n      }\n      navigate('/')\n    }\n\n    let deleteNote = async () => {\n      fetch(`/api/notes/${id}/delete/`, {\n        method: \"DELETE\",\n        'headers': {\n          'Content-Type': 'application/json'\n        }\n      })\n      navigate('/')\n    }\n\n  return (\n    <div className='note'>\n      <div className='note-header'>\n        <h3>\n          <Link to=\"/\"><ArrowLeft onClick={handleSubmit} /></Link>\n        </h3>\n        {id !== 'new' ? (\n          <button onClick={deleteNote}>delete</button>  \n        ): (\n          <button onClick={handleSubmit}>Done</button>\n        )}\n        \n      </div>\n      <textarea onChange={(e) => {setNote({...note, 'body': e.target.value})}} value={note?.body}></textarea>\n    </div>\n  )\n}\n\nexport default NotePage\n"],"mappings":"ukBAAA,MAAOA,MAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAAQC,cAAc,GAAIC,UAAS,KAAO,0BAA0B,CACpE,OAAQC,IAAI,KAAO,kBAAkB,CACrC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAG/C,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,GAAIC,SAAQ,CAAGF,WAAW,EAAE,CAC5B,eAAeJ,SAAS,EAAE,CAAlBO,EAAE,YAAFA,EAAE,CACV,cAAsBT,QAAQ,CAAC,IAAI,CAAC,wCAA/BU,IAAI,eAAEC,OAAO,eAElBV,SAAS,CAAE,UAAM,CACbW,OAAO,EAAE,CACb,CAAC,CAAE,CAACH,EAAE,CAAC,CAAC,CAER,GAAIG,QAAO,4FAAG,2JACRH,EAAE,GAAK,KAAK,wFACOI,MAAK,sBAAeJ,EAAE,MAAI,QAA3CK,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACRC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEF,IAAI,CAAC,CACzBL,OAAO,CAACK,IAAI,CAAC,uDAChB,kBANGJ,QAAO,0CAMV,CAED,GAAIO,WAAU,6FAAG,yIACfN,KAAK,sBAAeJ,EAAE,aAAY,CAChCW,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,IAAI,CAC3B,CAAC,CAAC,wDACH,kBARGS,WAAU,2CAQb,CAED,GAAIM,WAAU,6FAAG,yIACfZ,KAAK,sBAAuB,CAC1BO,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,IAAI,CAC3B,CAAC,CAAC,wDACH,kBARGe,WAAU,2CAQb,CAED,GAAIC,aAAY,CAAG,QAAfA,aAAY,EAAS,CACvB,GAAIjB,EAAE,GAAK,KAAK,EAAI,CAACC,IAAI,CAACY,IAAI,CAAE,CAC9BK,UAAU,EAAE,CACd,CAAC,IAAK,IAAIlB,EAAE,GAAK,KAAK,CAAE,CACtBU,UAAU,EAAE,CACd,CAAC,IAAK,IAAIV,EAAE,GAAK,KAAK,EAAIC,IAAI,GAAK,IAAI,CAAC,CACtCe,UAAU,EAAE,CACd,CACAjB,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,GAAImB,WAAU,6FAAG,yIACfd,KAAK,sBAAeJ,EAAE,aAAY,CAChCW,MAAM,CAAE,QAAQ,CAChB,SAAS,CAAE,CACT,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACFZ,QAAQ,CAAC,GAAG,CAAC,wDACd,kBARGmB,WAAU,2CAQb,CAEH,mBACE,aAAK,SAAS,CAAC,MAAM,wBACnB,aAAK,SAAS,CAAC,aAAa,wBAC1B,iCACE,KAAC,IAAI,EAAC,EAAE,CAAC,GAAG,uBAAC,KAAC,SAAS,EAAC,OAAO,CAAED,YAAa,EAAG,EAAO,EACrD,CACJjB,EAAE,GAAK,KAAK,cACX,eAAQ,OAAO,CAAEkB,UAAW,UAAC,QAAM,EAAS,cAE5C,eAAQ,OAAO,CAAED,YAAa,UAAC,MAAI,EACpC,GAEG,cACN,iBAAU,QAAQ,CAAE,kBAACE,CAAC,CAAK,CAACjB,OAAO,gCAAKD,IAAI,MAAE,MAAM,CAAEkB,CAAC,CAACC,MAAM,CAACC,KAAK,GAAE,EAAE,CAAC,KAAK,CAAEpB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEY,IAAK,EAAY,GACnG,CAEV,CAAC,CAED,cAAef,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}