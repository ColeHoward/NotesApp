{"ast":null,"code":"import _objectSpread from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var NotePage=function NotePage(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[id,getNote]);var getNote=useCallback(function(){if(id==='new')return;var csrftoken=getCookie('csrftoken');var response=fetch(\"/api/notes/\".concat(id,\"/\"),{method:\"GET\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken}});var data=response.json();setNote(data);});var createNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var csrftoken;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\",{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)});navigate('/');case 3:case\"end\":return _context.stop();}},_callee);}));return function createNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var csrftoken;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\".concat(id,\"/\"),{method:\"PUT\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)});navigate('/');case 3:case\"end\":return _context2.stop();}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var deleteNote=function deleteNote(){console.log('DELETE:',id);var csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\".concat(id,\"/\"),{method:'DELETE','headers':{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken}});navigate('/');};var handleSubmit=function handleSubmit(){if(note==null){navigate('/');}else if(id!=='new'&&(note.body==''||note.body==null)){console.log('handle submit DELETE:',note);deleteNote();}else if(id!=='new'){console.log('handle submit UPDATE:',note);updateNote();}else if(id==='new'&&note.body!==null){console.log('handle submit CREATE:',note);createNote();}};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});console.log('Handle Change:',id,value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default/*#__PURE__*/React.memo(NotePage);","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","ReactComponent","ArrowLeft","useNavigate","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","NotePage","navigate","id","note","setNote","getNote","csrftoken","response","fetch","method","headers","data","json","createNote","body","JSON","stringify","updateNote","deleteNote","console","log","handleSubmit","handleChange","value","e","target","memo"],"sources":["/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport { useParams } from 'react-router-dom';\nimport {ReactComponent as ArrowLeft} from \"../assets/arrow-left.svg\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nfunction getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i].trim()\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\n\nconst NotePage = () => {\n    let navigate = useNavigate();\n    const { id } = useParams();\n\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()\n    }, [id, getNote])\n\n    let getNote = useCallback( () => {\n        if (id === 'new') return\n        var csrftoken = getCookie('csrftoken');\n        let response = fetch(`/api/notes/${id}/`, {\n            method: \"GET\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n        })\n        let data = response.json()\n        setNote(data)\n    })\n\n    let createNote = async () => {\n        var csrftoken = getCookie('csrftoken');\n        fetch(`/api/notes/`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        })\n        navigate('/')\n    }\n\n\n    let updateNote = async () => {\n        var csrftoken = getCookie('csrftoken');\n        fetch(`/api/notes/${id}/`, {\n            method: \"PUT\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        })\n        navigate('/')\n    }\n\n\n    let deleteNote = () => {\n      console.log('DELETE:', id)\n      var csrftoken = getCookie('csrftoken');\n\n        fetch(`/api/notes/${id}/`, {\n            method: 'DELETE',\n            'headers': {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            }\n        })\n        navigate('/')\n    }\n\n    let handleSubmit = () => {\n        if (note == null){\n            navigate('/')\n        }\n        else if (id !== 'new' && (note.body == '' || note.body == null)) {\n            console.log('handle submit DELETE:', note)\n            deleteNote()\n        }else if (id !== 'new') {\n            console.log('handle submit UPDATE:', note)\n            updateNote()\n        } else if (id === 'new' && note.body !== null) {\n            console.log('handle submit CREATE:', note)\n            createNote()\n        }   \n    }\n\n    let handleChange = (value) => {\n        setNote(note => ({ ...note, 'body': value }))\n        console.log('Handle Change:', id, value)\n    }\n    return (\n        <div className=\"note\" >\n            <div className=\"note-header\">\n                <h3>\n                    <ArrowLeft onClick={handleSubmit} />\n                </h3>\n                {id !== 'new' ? (\n                    <button onClick={deleteNote}>Delete</button>\n                ) : (\n                    <button onClick={handleSubmit}>Done</button>\n                )}\n\n            </div>\n            <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n        </div>\n    )\n}\n\nexport default React.memo(NotePage)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}