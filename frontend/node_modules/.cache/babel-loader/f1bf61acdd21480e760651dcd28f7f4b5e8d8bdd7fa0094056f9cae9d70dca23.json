{"ast":null,"code":"import _objectSpread from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var NotePage=function NotePage(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var csrftoken,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:csrftoken=getCookie('csrftoken');_context.next=5;return fetch(\"/api/notes/\".concat(id,\"/\"),{method:\"GET\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;setNote(data);case 10:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();getNote();},[id]);var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var csrftoken;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\",{method:\"POST\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)}).then(function(){return navigate('/');});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var csrftoken;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\".concat(id,\"/\"),{method:\"PUT\",headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(note)}).then(function(){return navigate('/');});case 2:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=function deleteNote(){console.log('DELETE:',id);var csrftoken=getCookie('csrftoken');fetch(\"/api/notes/\".concat(id,\"/\"),{method:'DELETE','headers':{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':csrftoken}}).then(function(){return navigate('/');});};var handleSubmit=function handleSubmit(){if(note==null){navigate('/');}else if(id!=='new'&&(note.body===''||note.body===null)){console.log('handle submit DELETE:',note);deleteNote();}else if(id!=='new'){console.log('handle submit UPDATE:',note);updateNote();}else if(id==='new'&&note.body!==null){console.log('handle submit CREATE:',note);createNote();}};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});console.log('Handle Change:',id,value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","ReactComponent","ArrowLeft","useNavigate","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","NotePage","navigate","id","note","setNote","getNote","csrftoken","fetch","method","headers","response","json","data","createNote","body","JSON","stringify","then","updateNote","deleteNote","console","log","handleSubmit","handleChange","value","e","target"],"sources":["/Users/ColeHoward/Desktop/Django-React/NotesApp/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport { useParams } from 'react-router-dom';\nimport {ReactComponent as ArrowLeft} from \"../assets/arrow-left.svg\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nfunction getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i].trim()\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\n\nconst NotePage = () => {\n    let navigate = useNavigate();\n    const { id } = useParams();\n\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        const getNote = async () => {\n            if (id === 'new') return\n            var csrftoken = getCookie('csrftoken');\n            let response = await fetch(`/api/notes/${id}/`, {\n                method: \"GET\",\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'X-CSRFToken': csrftoken\n                },\n            })\n            let data = await response.json()\n            setNote(data)\n        }\n        getNote()\n    }, [id])\n\n    \n\n    let createNote = async () => {\n        var csrftoken = getCookie('csrftoken');\n        fetch(`/api/notes/`, {\n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        }).then(() => navigate('/'))\n    }\n\n\n    let updateNote = async () => {\n        var csrftoken = getCookie('csrftoken');\n        fetch(`/api/notes/${id}/`, {\n            method: \"PUT\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(note)\n        }).then(() => navigate('/'))\n        \n    }\n\n\n    let deleteNote = () => {\n      console.log('DELETE:', id)\n      var csrftoken = getCookie('csrftoken');\n\n        fetch(`/api/notes/${id}/`, {\n            method: 'DELETE',\n            'headers': {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrftoken\n            }\n        }).then(() => navigate('/'))\n    }\n\n    let handleSubmit = () => {\n        if (note == null){\n            navigate('/')\n        }\n        else if (id !== 'new' && (note.body === '' || note.body === null)) {\n            console.log('handle submit DELETE:', note)\n            deleteNote()\n        }else if (id !== 'new') {\n            console.log('handle submit UPDATE:', note)\n            updateNote()\n        } else if (id === 'new' && note.body !== null) {\n            console.log('handle submit CREATE:', note)\n            createNote()\n        }   \n    }\n\n    let handleChange = (value) => {\n        setNote(note => ({ ...note, 'body': value }))\n        console.log('Handle Change:', id, value)\n    }\n    return (\n        <div className=\"note\" >\n            <div className=\"note-header\">\n                <h3>\n                    <ArrowLeft onClick={handleSubmit} />\n                </h3>\n                {id !== 'new' ? (\n                    <button onClick={deleteNote}>Delete</button>\n                ) : (\n                    <button onClick={handleSubmit}>Done</button>\n                )}\n\n            </div>\n            <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n        </div>\n    )\n}\n\nexport default NotePage;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}